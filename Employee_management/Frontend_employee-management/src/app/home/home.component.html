
<!-- creating a employee in popup form modal -->
<form class="modal fade" id="myModal" tabindex="-1" [formGroup]="users" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
(ngSubmit)="onSubmit(users.value)">
  <div class="modal-dialog" role="document">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Employee Details</h4>
     
        <button type="button" id="closed" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body" id="modalbody">
            <div class="form-group">
                <label for="empid">EMP Id</label>
                <input class="form-control" name="empid" id="empid"  [formControl]="users.controls.empid"
                [ngClass]="{ 'is-invalid': submitted && users.controls.empid.errors }" >
                <div *ngIf="submitted && users.controls.empid.errors" class="invalid-feedback">
                    <div *ngIf="users.controls.empid.errors.required">empId is required</div>
                    <div *ngIf="users.controls.empid.errors.pattern">EmpId should be minimum 3 and maximim 6 characters</div>
                  </div>
            </div>
          <div class="row">
            <div class="col">
                <div class="form-group">
                    <label for="empfirstname">*firstname</label>
                    <input type="text" name="empfirstname" id="firstname" class="form-control" [formControl]="users.controls.empfirstname" 
                    [ngClass]="{ 'is-invalid': submitted && users.controls.empfirstname.errors }">
                    <div *ngIf="submitted && users.controls.empfirstname.errors" class="invalid-feedback">
                      <div *ngIf="users.controls.empfirstname.errors.required">First Name is required</div>
                      <div *ngIf="users.controls.empfirstname.errors.pattern">First Name should be characters</div>
                    </div>
                  </div>

            </div>
            <div class="col">
              <div class="form-group">
                <label for="emplastname">*Lastname</label>
                <input type="text" name="emplastname" id="lastname" class="form-control" 
                [formControl]="users.controls.emplastname" [ngClass]="{ 'is-invalid': submitted && users.controls.emplastname.errors }">
                <div *ngIf="submitted && users.controls.emplastname.errors" class="invalid-feedback">
                  <div *ngIf="users.controls.emplastname.errors.required">Last Name is required</div>
                  <div *ngIf="users.controls.emplastname.errors.pattern">Last Name should be characters</div>
                </div>
              </div>

            </div>
          </div>
      <!-- </div> -->
      <div class="row">
          <div class="col">
            <div class="form-group">
              <label for="empgender">*Gender</label>
              <select name="empgender" id="gender" class="form-control" [ngClass]="{ 'is-invalid': submitted && users.controls.empgender.errors }"
                [formControl]="users.controls.empgender">
                <option value="male">Male</option>
                <option value="female">Female</option>
              </select>
              <div *ngIf="submitted && users.controls.empgender.errors" class="invalid-feedback">
                  <div *ngIf="users.controls.empgender.errors.required">Gender is required</div>
              </div>
        
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label>*Date of Birth</label>
              <input type="date" class="form-control" id="dob" name="empdob" [formControl]="users.controls.empdob" 
              [ngClass]="{ 'is-invalid': submitted && users.controls.empdob.errors }">
              <div *ngIf="submitted && users.controls.empdob.errors" class="invalid-feedback">
                <div *ngIf="users.controls.empdob.errors.required">date of birth is required</div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="form-group">
            <label for="empaddress">Address</label>
            <textarea class="form-control" name="address" id="address" rows="2" [formControl]="users.controls.empaddress" 
            [ngClass]="{ 'is-invalid': submitted && users.controls.empaddress.errors }"></textarea>
            <div *ngIf="submitted && users.controls.empaddress.errors" class="invalid-feedback">
              <div *ngIf="users.controls.empaddress.errors.required">address is required</div>
            </div>
          </div>
          <div class="row">
              <div class="col">
                <div class="form-group">
                  <label for="empmobile">*Mobile No</label>
                  <input type="text" name="mobile" [formControl]="users.controls.empmobile" class="form-control" 
                  [ngClass]="{ 'is-invalid': submitted && users.controls.empmobile.errors }">
                  <div *ngIf="submitted && users.controls.empmobile.errors" class="invalid-feedback">
                    <div *ngIf="users.controls.empmobile.errors.required">mobile no is required</div>
                    <div *ngIf="users.controls.empmobile.errors.pattern">mobile no should be 10 digits</div>
                  </div>
          
                </div>
          
              </div>
              <div class="col">
                <div class="form-group">
                  <label for="city">*City</label>
                  <input type="text" name="city" id="city" class="form-control" [formControl]="users.controls.empcity" 
                  [ngClass]="{ 'is-invalid': submitted && users.controls.empcity.errors }">
                  <div *ngIf="submitted && users.controls.empcity.errors" class="invalid-feedback">
                    <div *ngIf="users.controls.empcity.errors.required">city is required</div>
                    <div *ngIf="users.controls.empcity.errors.pattern">city should be characters</div>
                  </div>
                </div>
              </div>
            </div>
            <input type="hidden" class="form-control" name="_id" [formControl]="users.controls.empcity" 
             value="employee['_id']">
        </div>
            <div id="msg" *ngIf="res" >
              <h4 class="text-center" id="message">{{res.message}} {{res.err}}</h4>
            </div>
      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" data-toggle="modal"  id="cancel" class="btn btn-danger" aria-label="Close" data-dismiss="modal">Close</button>
        <button type="submit"    id="submit"  class="btn btn-info"  >Submit</button>
      </div>

    </div>
  </div>
</form>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Emp Id</th>
      <th>Firstname</th>
      <th>Lastname</th>
      <th>Address</th>
      <th>Dob</th>
      <th>Gender</th>
      <th>Mobile No</th>
      <th>city</th>

      <td>
        <button type="button" data-toggle="modal"  data-target="#myModal" class="btn btn-primary">
          <i class="fa fa-plus" aria-hidden="true"></i>
        </button>
      </td>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let employee of employees" >
      <td *ngIf="employee['empid']">{{employee['empid']}}</td>
      <td *ngIf="employee['empid']">{{employee['empfirstname'] }}</td>
      <td *ngIf="employee['empid']">{{employee['emplastname']}}</td>
      <td *ngIf="employee['empid']">{{employee['empaddress']}}</td>
      <td *ngIf="employee['empid']">{{employee['empdob']}}</td>
      <td *ngIf="employee['empid']">{{employee['empgender']}}</td>
      <td *ngIf="employee['empid']">{{employee['empmobile']}}</td>
      <td *ngIf="employee['empid']">{{employee['empcity']}}</td>



      <td  *ngIf="employee['empid']">
        <a routerLink="/view/{{employee['_id']}}" title="View" class="btn btn-info">
          <i class="fa fa-eye"></i>
        </a>&nbsp;&nbsp;
        <a routerLink="/edit/{{employee['_id']}}" (click)="update(employee['_id'])" title="Edit" type="button" data-toggle="modal"
         data-target="#myModal" class="btn btn-primary">
          <i class="fa fa-edit"></i>
        </a>&nbsp;&nbsp;
        <button title="Delete" (click)="delete(employee['_id'])" class="btn btn-danger">
          <i class="fa fa-trash"></i>
        </button>
      </td>
    </tr>
  </tbody>
</table>



